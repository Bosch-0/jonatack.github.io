<!--

jon atack bitcoin core developer and protocol researcher

-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>jon atack - Reviewing is Humming</title>
    <meta charset="utf-8">
    <base target="_blank">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="/style.css" />
  </head>

  <body>
    <div id="content">
      <div id="right">
        <div class="list">
          <ul>
            <li>
              <a href="/" target="_self">home</a>
            </li>
            <li>
              <a href="/articles" target="_self">articles</a>
            </li>
            <li>
              <a href="/presentations" target="_self">presentations</a>
            </li>
            <li>
              <a href="/sponsors" target="_self">sponsors</a>
            </li>
            <li>
              <a href="/contact" target="_self">contact</a>
            </li>
            <li>
              <a href="/donate" target="_self">donate</a>
            </li>
            <li>
              &nbsp;
            </li>
            <li class="small">
              style:<br>
              <a href="https://basicbitch.software" class="small" target="_blank">basicbitch.software</a>
            </li>
          </ul>
        </div>
        <div class="namecap">
          <a href="/" target="_self">&nbsp;jon&nbsp;<br>atack</a>
        </div>
      </div>

      <div id="entry_block">
        <div class="entry">
          <div class="date">Last updated: 9 February 2020</div>
          <div class="body">
            <article>
              <div class="title">Reviewing is Humming</div>

              <h3 id="before-you-begin">ON REVIEWING AND HELPING THOSE WHO DO IT</h3>

              <p>
                Reviewing is not only the most effective way to contribute as a
                new contributor to Bitcoin, it is also an important way of
                <a href="https://tools.ietf.org/html/rfc7282"
                   target="_blank">humming to find rough consensus</a>.
                Just as what we buy and do every day is the best way we can
                influence things, our review choices matter profoundly and
                cumulatively.
              </p>
              <h4 id="the-current-state-of-affairs">The Current State of Affairs</h4>
              <p>
                <a href="https://github.com/bitcoin/bitcoin/pulls"
                   target="_blank">Several hundred pull requests</a>
                are open at any given moment in Bitcoin Core waiting for review
                and testing, and the stack continues to grow higher -- 280 in
                November 2019, 350 at the end of January 2020!
              </p>
              <p>
                Review is currently not keeping pace with PRs. The same is true
                for
                <a href="https://github.com/bitcoin/bitcoin/issues"
                   target="_blank">open issues</a>,
                which are also up to nearly 800, from 700 a few months ago.
              </p>
              <p>
                The PRs that tend to be reviewed quickly are the newest, the
                easiest to review, and the trivial. Valuable, high-priority PRs
                can be seen sitting for months or even years without enough
                reviewers, subjecting their authors to frustration,
                discouragement, and rebase hell until they abandon working on
                them.
              </p>
              <p>
                This is not a criticism of the maintainers. They're doing a
                great job. They need help: more reviewers and testers.
              </p>
              <p>
                The number of people doing good, consistent review and testing
                is surprisingly low. On any given day, we see the same 5-15
                people reviewing on a daily basis. Of these, maybe a bit more
                than half have the experience, situation and predisposition to
                tackle review of the harder or larger PRs. That leaves us with
                roughly ten consistent reviewers present most days -- and some
                days it's less than five.
              </p>
              <p>
                When I describe this situation to people, even to established
                VCs in the Bitcoin space, they tend to be astonished at how few
                people the system is depending on.
              </p>

              <h4 id="current-issues">Current Issues</h4>
              <p>
                This state of affairs creates several problems:
                <ol>
                  <li>
                    High-priority, larger, or harder-to-review PRs can go for
                    months (and even years) without sufficient review.
                  </li>
                  <li>
                    Smaller PRs that provide important, non-urgent prevention,
                    like adding missing test coverage, can sit for months
                    without review or being merged.
                  </li>
                  <li>
                    Preventative test coverage tends to be underappreciated
                    until the missing coverage causes pain from a bug,
                    regression, or vulnerability.
                  </li>
                  <li>
                    Any PR of non-immediate urgency beyond a certain size,
                    number of commits, or level of complexity is a candidate for
                    needing to be separated into bite-sized PRs in order to
                    attract reviewers, which multiplies the number of PRs. While
                    small focused PRs are good, and separating large PRs into
                    logical small ones can improve the code, some changes are
                    better done in one go.
                  </li>
                  <li>
                    Grease (review, merges) sometimes goes to the squeaky
                    wheel. Such is life.
                  </li>
                  <li>
                    PR authors may be incentivized to open more trivial PRs that
                    have a better chance of being reviewed and merged within a
                    reasonable time (until the author tires of making this sort
                    of contribution and aspires to greater things, before being
                    discouraged again).
                  </li>
                  <li>
                    Things tend to be abandoned or never quite finished. Some
                    contributors leave or take long periods of absence from the
                    project out of frustration. Other people shake it off but
                    feel recurring discouragement. Yes, it's open source. But I
                    think we can improve the situation.
                  </li>
                  <li>
                    Managing context, relevance, and being kind can make a big
                    difference. Bitcoin Core code review arguably represents a
                    micro-economy of sorts, but it's also a human social
                    process. Getting your PRs reviewed without being too
                    annoying (hopefully by helping others and doing consistent
                    review yourself) can be an art.
                  </li>
                  <li>
                    Nevertheless, we're running a continual risk of
                    mal-investment -- scarce review resources going to vocal,
                    half-baked, self-promoting or bikesheddy things rather than
                    catching a regression or vulnerability, fixing issues,
                    improving test coverage, finishing up ongoing work that
                    needed follow-ups, doing long-term work, and other
                    priorities.
                  </li>
                  <li>
                    Above all, not enough contributors do consistent review and
                    follow the rule of thumb of 5-15 reviews or issues handled
                    per PR opened.
                  </li>
                </ol>
              </p>
              <h4 id="reviewing-is-humming">Reviewing is Humming</h4>
              <p>
                Given this state of affairs, clearly, which PRs we review with
                our limited time is an important choice, and one that might be
                underappreciated.
              </p>
              <p>
                The PRs we review represent:
                <ul>
                  <li>
                    what areas we contribute to
                  </li>
                  <li>
                    which project priorities matter to us
                  </li>
                  <li>
                    what kind of PRs we incentivize
                  </li>
                  <li>
                    ultimately, which behavior we reward
                  </li>
                </ul>
              </p>
              <p>
                If I were a maintainer charged with handling incoming PRs of a
                certain category, then the following section would not apply.
                But as a part-time contributor with much to learn and limited
                means, I pay attention nowadays to selecting the right PRs to
                review. Here are my current criteria:
                <ul>
                  <li>
                    What: choosing high-priority, higher-value, harder PRs over
                    new/easy/annoying ones (knowing that those will see review
                    anyway) unless they are urgent, useful, interesting, or an
                    area I know well.
                  </li>
                  <li>
                    Who: rewarding people who do consistent or outstanding
                    review/issue testing. Some of the most deserving people
                    haven't seen enough review from me yet, but I'm working on
                    it. Hopefully with more experience and time to invest I'll
                    get there.
                  </li>
                  <li>
                    I also avoid reviewing these kinds of PRs:
                    <ol>
                      <li>
                        PRs that appear unfinished or lacking sufficient
                        research
                      </li>
                      <li>
                        PRs that seem poorly done or unlikely to be merged
                      </li>
                      <li>
                        PRs whose approach I don't agree with (as a newcomer, I
                        avoid NACKing)
                      </li>
                      <li>
                        PRs by authors who frequently open and close PRs on a
                        whim
                      </li>
                      <li>
                        PRs where arguing/bikeshedding is taking place; these
                        PRs attract a lot of attention anyway
                      </li>
                    </ol>
                  </li>
                  <li>
                    If you are a newer or less-experienced contributor, please
                    don't let that be an excuse or discourage you from testing
                    issues, release candidates, and reviewing. These activities
                    will teach you more and usually be of higher value to the
                    project than opening PRs. Simply choose issues to test and
                    PRs to review that are more accessible -- ideally right at
                    the edge of your current reach -- and ramp up gradually to
                    the harder ones.
                  </li>
                </ul>
              </p>
              <p>
                Sure, writing code, mailing list posts, and doing research can
                be more fun and glorifying than reviewing, and are possibly much
                better for finding grants or employment. I totally get that.
                And everyone has different priorities. But reviewing, issue
                testing, release candidate testing, and even building gitian
                signatures are too vital to Bitcoin. <em>We need to reward
                selfless review and testing.</em>
              </p>
              <p>
                Hopefully the
                <a href="https://bitcoincore.reviews"
                   target="_blank">Bitcoin Core PR Review Club</a>
                can help stimulate review, but I'm thinking about how else we
                can encourage it, add incentives or social norms maybe,
                etc. Maybe we should launch a Bitcoin Core <em>Testing</em>
                Club. These are good things to think about.
              </p>
              <p>
                As
                <a href="https://twitter.com/moneyball" target="_blank">Steve Lee</a>
                of
                <a href="https://twitter.com/sqcrypto" target="_blank">Square Crypto</a>
                recently wrote: "If literally all a developer did was review
                hard but important PRs it'd be incredibly valuable." It would be
                wonderful if more open source patrons and donors shared this
                view.
              </p>

              <h4 id="what-to-do">What To Do</h4>
              <p>
                This is open source; it's ad hoc, free-flowing, and these
                ideas are proposed more as things to think about than rules.
              </p>
              <p>
                <em>Contributing is not mainly about opening PRs</em>. It would
                be great to get away from the idea of telling people that
                contributing equals opening PRs and basking in the
                glory. Contributing is much more than this and it could be
                reflected in what we say and do.
              </p>
              <p>
                Continue to do more reviewing and issue testing than adding
                PRs to the backlog. Reviewing 5 to 15 PRs (or testing 5-15
                issues!) for every PR you open is a good range. Communicate that
                norm to people.
              </p>
              <p>
                Before and after opening a PR in a particular domain, <em>review
                the other open PRs in the same domain</em>. Presumably you have
                or could use more domain expertise. Gather it and share it by
                reviewing and testing the related PRs.
              </p>
              <p>
                Participate every week in the review club, not only as a way to
                learn but primarily to <em>actually do review</em>. Reviewers,
                both beginners and experts, are the true heroes. Bitcoin needs
                them.
              </p>
              <p>
                Find a way to <em>reward people who are doing consistent review
                or testing</em>. It's a harder and less-celebrated path. These
                people need support. Review their work. Help them. Donate
                Bitcoin to them.
              </p>
              <p>
                <a href="https://github.com/bitcoin/bitcoin/blob/master/CONTRIBUTING.md#code-review"
                   target="_blank">All review is not equal</a>;

                some reviews naturally weigh more than others, and that's the
                way it should be. But: contributing is reviewing. Reviewing is
                humming.
                <a href="how-to-review-pull-requests-in-bitcoin-core"
                   target="_self">So hum</a>.
              </p>
              <p>
                Happy contributing!
              </p>
              <p>Cheers,</p>
              <p>Jon Atack</p>
            </article>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
